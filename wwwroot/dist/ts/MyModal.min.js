"use strict";var __awaiter=this&&this.__awaiter||function(o,n,t,e){return new(t||(t=Promise))(function(r,i){function a(o){try{u(e.next(o))}catch(o){i(o)}}function f(o){try{u(e.throw(o))}catch(o){i(o)}}function u(o){o.done?r(o.value):new t(function(n){n(o.value)}).then(a,f)}u((e=e.apply(o,n||[])).next())})},__generator=this&&this.__generator||function(o,n){function t(t){return function(a){return function(t){if(e)throw new TypeError("Generator is already executing.");for(;f;)try{if(e=1,r&&(i=r[2&t[0]?"return":t[0]?"throw":"next"])&&!(i=i.call(r,t[1])).done)return i;switch(r=0,i&&(t=[0,i.value]),t[0]){case 0:case 1:i=t;break;case 4:return f.label++,{value:t[1],done:!1};case 5:f.label++,r=t[1],t=[0];continue;case 7:t=f.ops.pop(),f.trys.pop();continue;default:if(i=f.trys,!(i=i.length>0&&i[i.length-1])&&(6===t[0]||2===t[0])){f=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){f.label=t[1];break}if(6===t[0]&&f.label<i[1]){f.label=i[1],i=t;break}if(i&&f.label<i[2]){f.label=i[2],f.ops.push(t);break}i[2]&&f.ops.pop(),f.trys.pop();continue}t=n.call(o,f)}catch(o){t=[6,o],r=0}finally{e=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,a])}}var e,r,i,a,f={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},ModalMount=function(){return function(o,n,t,e,r,i,a){this.modalContainerId=n||o&&o.modalContainerId||"",this.modalId=t||o&&o.modalId||"",this.selector=e||o&&o.selector||"",this.autoClose=r||o&&o.autoClose||!0,this.viewTime=i||o&&o.viewTime||0,this.forceHideTarget=a||o&&o.forceHideTarget||!0,this.formContainerId=o&&o.formContainerId||"",this.formSelector=o&&o.formSelector||"",this.formId=o&&o.formId||""}}(),TimerInfo=function(){return function(o,n,t,e,r){this.counter=n||o&&o.counter,this.timer=t||o&&o.timer,this.counterFunc=e||o&&o.counterFunc,this.timerFunc=r||o&&o.timerFunc}}(),DimensionInfo=function(){return function(o,n,t,e,r,i){this.top=n||o&&o.top,this.left=t||o&&o.left,this.width=e||o&&o.width,this.height=r||o&&o.height,this.forceDimension=i||o&&o.forceDimension}}(),ModalInfo=function(){return function(o,n,t,e){this.modalMount=n||o&&o.modalMount||new ModalMount,this.dimensionInfo=t||o&&o.dimensionInfo||new DimensionInfo,this.timerInfo=e||o&&o.timerInfo||new TimerInfo}}(),MyModal=function(){function o(){}return o.GetModal=function(o,n){var t=n;if(!t){var e=o?$("#"+o):$("#modalInfo");t=e?e.attr("data-modal-id"):""}return t?$("#"+t):this.SetModal()},o.SetModal=function(n,t){var e=n?$(n):$(".modal").first(),r=t||"My_Modal_"+Math.floor(20*Math.random());return e.attr("id",r),o.$Modal=e,o.$TimerCounter=o.$Modal.find(".timer-counter"),o.$Modal},o.GetForm=function(o,n){var t=n;if(!t){var e=o?$("#"+o):$("#formInfo")||$("#modalInfo");t=e?e.attr("data-form-id"):""}return t?$("#"+t):this.SetForm()},o.SetForm=function(o,n){var t=o?$(o):$("form").first(),e=n||"My_Form_"+Math.floor(20*Math.random());return t.attr("id",e),t},o.GetActiveForm=function(n,t){return $(o.GetModal(n,t)).find("form")},o.InitModal=function(n,t){o.ModalInfo=new ModalInfo(t),n.data("modal-info",o.ModalInfo)},o.UpdateModalInfo=function(n,t,e){if(void 0===e&&(e=!0),e){var r=o.GetModalInfo(n);r&&r.timerInfo&&r.timerInfo.timerFunc&&r.timerInfo.timerFunc()}n.data("modal-info",t)},o.GetModalInfo=function(o){return new ModalInfo(o.data("modal-info"))},o.ShowModalForm=function(n,t,e,r,i,a){var f=this,u=$(t),l=$(n),d=u.find(".timer-counter"),c=o.GetModalInfo(t);if(c&&c.timerInfo&&c.timerInfo.timerFunc&&c.timerInfo.timerFunc(),c.modalMount.forceHideTarget&&l.removeClass("zoom-in").addClass("zoom-out"),"window"==e||"window"==r)u.addClass("window"),$("html,body").css({overflow:"hidden"});else{u.removeClass("window");var s=l&&l.offset(),m=e?+e:(s&&s.top||0)<=0?0:s&&s.top||0,h=r?+r:(s&&s.left||0)<=0?0:s&&s.left||0,I=o.ModalInfo&&o.ModalInfo.dimensionInfo&&o.ModalInfo.dimensionInfo.forceDimension&&i?+i:i?+i<250?250:+i:0,v=o.ModalInfo&&o.ModalInfo.dimensionInfo&&o.ModalInfo.dimensionInfo.forceDimension&&a?+a:a?+a<300?300:+a:0;I=I>window.innerWidth?window.innerWidth:I,h=(h=h+(l.width()||0)/2-18)-I/2<0?0:h-I/2,m=(m=m+(l.height()||0)/2-10)-v/2<0?0:m-v/2,u.css({top:m+"px",left:h-5+"px",width:I+"px",height:v+"px"})}if(u.removeClass("zoom-out").addClass("zoom-in"),u.find(".btn-close, .cancel").on("click",function(n){return __awaiter(f,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return[4,o.CloseModal(u,void 0,l,c&&c.timerInfo&&c.timerInfo.counter,c&&c.timerInfo&&c.timerInfo.timer)];case 1:return n.sent(),[2]}})})}),c&&c.modalMount.autoClose){var w=c.modalMount.viewTime||5;c.timerInfo.counterFunc=function(){return __awaiter(f,void 0,void 0,function(){return __generator(this,function(o){return d.text(--w),[2]})})},c.timerInfo.counter=setInterval(function(){return __awaiter(f,void 0,void 0,function(){return __generator(this,function(o){switch(o.label){case 0:return[4,c.timerInfo.counterFunc()];case 1:return o.sent(),[2]}})})},1e3),c.timerInfo.timerFunc=function(){return __awaiter(f,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return clearInterval(c.timerInfo.counter),clearTimeout(c.timerInfo.timer),d.text(""),[4,o.CloseModal(u,void 0,l)];case 1:return n.sent(),[2]}})})},c.timerInfo.timer=setTimeout(function(){return __awaiter(f,void 0,void 0,function(){return __generator(this,function(o){switch(o.label){case 0:return[4,c.timerInfo.timerFunc()];case 1:return o.sent(),[2]}})})},1e3*w),o.UpdateModalInfo(t,c,!1)}},o.SetModalForm=function(o,n,t,e){var r=$(o),i=($(n),r.find(".modal-content, .modal-body"));i.html(" "),$(n).clone(t,e).removeClass("hidden").appendTo(i),i.find(".input-validation-error").removeClass("input-validation-error")},o.CloseModal=function(o,n,t,e,r){return __awaiter(this,void 0,void 0,function(){var i,a;return __generator(this,function(f){return i=$(o),a=n?$(n.target):t?$(t):null,i.removeClass("zoom-in").addClass("zoom-out"),a&&a.removeClass("zoom-out").addClass("zoom-in"),i.find(".timer-counter").text(""),$("html,body").css({overflow:"auto"}),clearInterval(e),clearTimeout(r),[2]})})},o.ModalInfo=new ModalInfo,o}();
//# sourceMappingURL=MyModal.min.js.map
